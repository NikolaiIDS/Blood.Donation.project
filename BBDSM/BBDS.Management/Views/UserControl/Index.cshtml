@model IEnumerable<UserEditingViewModel>
@{
    ViewData["Title"] = "Index";
}

<div class=" container p-3">
    <div class=" row pt-4">
        <div class="col-6">
            <h2 class=" text-primary"> Управление на потребители</h2>
        </div>

    </div>
    <br>
    <div>
        <label style="padding-left: 10px;">Желан брой потребители</label>
        <input class="form-control " autocomplete="Брой търсени" aria-required="true" />
        <div class="form-group" style="padding-bottom: 20px;">
            <label>Град</label>
            <select class="form-control">

                <option value="F40854CE-7D63-46A4-BB60-07DDE1A4705E">Пловдив</option>
                <option value="72316B2D-31A5-4BA8-8609-13719F7CCE98">Велико Търново</option>
                <option value="3A4DD904-D3B8-4ADB-B6A6-4E42267C9683">София</option>
                <option value="D0E60734-F384-4CCB-B472-61E8E9629E48">Враца</option>
                <option value="00182E26-FD34-436A-988A-69A8CE6CEB16">Горна Оряховица</option>
                <option value="56393F6B-D016-4583-B536-726AD925ED8A">Левски</option>
                <option value="7AAC1F3B-EF3E-461E-8AAB-857846F67FA4">Дряново</option>
                <option value="65078407-8AE3-4872-A807-CE3484306A99">Варна</option>

            </select>
            <span class="small text-danger"></span>
        </div>
        <div class="form-group" style="padding-bottom: 20px;">
            <label>Кръвна група</label>
            <select " class="form-control">
                <option value="1">A+</option>
                <option value="2">A-</option>
                <option value="3">B+</option>
                <option value="4">B-</option>
                <option value="5">AB+</option>
                <option value="6">AB-</option>
                <option value="7">0+</option>
                <option value="8">0-</option>
            </select>
            <span class="small text-danger"></span>
        </div>
    </div>

    <table class="table table-bordered table-striped" style="width : 100%">
        <thead>
            <tr>
                <th>
                    Данни на потребителя
                </th>

                @if (User.IsInRole("Medic"))
                {
                <th>
                    Изпрати имейл
                </th>
                }
                @if (User.IsInRole("Admin"))
                {
                <th>
                    Управление
                </th>
                }

                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
            <tr>
                <td width="80%">
                    @item.UserName <br />
                    @item.FirstName <br />
                    @item.LastName <br />
                    @item.EGN <br />
                    <div class="mb-3">
                        <label>Кръвна група</label><br />
                        @if (item.BloodId == 1)
                        {
                        <text>A+</text>
                        }
                        @if (item.BloodId == 2)
                        {
                        <text>A-</text>
                        }
                        @if (item.BloodId == 3)
                        {
                        <text>B+</text>
                        }
                        @if (item.BloodId == 4)
                        {
                        <text>B-</text>
                        }
                        @if (item.BloodId == 5)
                        {
                        <text>AB+</text>
                        }
                        @if (item.BloodId == 6)
                        {
                        <text>AB-</text>
                        }
                        @if (item.BloodId == 7)
                        {
                        <text>0+</text>
                        }
                        @if (item.BloodId == 8)
                        {
                        <text>0-</text>
                        }

                    </div>
                </td>

                <td>
                    <div class="btn-group" role="group">
                        @if (User.IsInRole("Medic"))
                        {
                        <form method="post" asp-controller="Email" asp-action="SendEmail" asp-route-id="@item.Email">
                            @*  <i class="bi bi-pencil-square"></i>*@
                            <input type="hidden" value="@item.Email" name="toEmail" />
                            <input class="btn button-17" type="submit" value="Изпрати" />
                        </form>
                        }

                        @if (User.IsInRole("Admin"))
                        {

                        <a asp-controller="UserControl" asp-action="Edit" asp-route-id="@item.Id" class="btn btn-primary "> <i class="bi bi-pencil-square"></i> Edit</a>
                        <a asp-controller="UserControl" asp-action="Delete" asp-route-id="@item.Id" class="btn btn-danger "> <i class="bi bi-person-dash-fill"></i> Delete</a>
                        }

                    </div>
                </td>

            </tr>
            }
        </tbody>
    </table>
</div>